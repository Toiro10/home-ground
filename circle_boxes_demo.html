<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Circle Row Demo</title>
  <style>
    body {
      margin: 0;
      background: #ffffff;
    }

    /* オーバーレイ全体（カメラはここに固定） */
    .row-wrapper {
      position: relative;
      width: 100vw;
      height: 180px;
      overflow: hidden;
      background: #ffffff;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
    }

    /* 右→左に「紙」だけが動く横一列のコンテナ */
    .circle-row {
      position: absolute;
      top: 60px;
      left: 0;
      display: flex;
      gap: 40px;
      will-change: transform;
      transform: translateX(0); /* JS でどんどんマイナス方向へ動かす */
      transition: transform 0.25s linear; /* 一コマごとのスライドを滑らかに */
    }

    /* ひとつ分の □＋○ セット */
    .cell {
      position: relative;
      width: 60px;
      height: 60px;
      flex: 0 0 auto;
    }

    /* □ */
    .cell-box {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 36px;
      height: 36px;
      border: 1px solid #000;
      background: transparent;
      box-sizing: border-box;
    }

    /* ○（最初は非表示、active になったら出す） */
    .cell-circle {
      position: absolute;
      top: 0;
      left: 0;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 4px solid red;
      box-sizing: border-box;
      opacity: 0;
      transform: scale(0.7);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .cell.active .cell-circle {
      opacity: 1;
      transform: scale(1);
    }

    /* 最後にかぶさるホワイトフェード */
    .white-cover {
      position: absolute;
      inset: 0;
      background: #ffffff;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.8s ease;
    }

    .white-cover.show {
      opacity: 1;
    }

    /* 中央に出すテキスト（本番では hero 側に移す想定） */
    .caption {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.8s ease 0.4s;
      font-size: 20px;
    }

    .caption.show {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div class="row-wrapper">
    <div class="circle-row" id="circleRow">
      <!-- □＋○ を好きな数だけ並べる -->
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
      <div class="cell"><div class="cell-box"></div><div class="cell-circle"></div></div>
    </div>

    <div class="white-cover" id="whiteCover"></div>

    <div class="caption" id="caption">
      彼の善良さは、空欄を埋めるだけで生まれている。
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const row = document.getElementById("circleRow");
      const cells = Array.from(document.querySelectorAll(".cell"));
      const cover = document.getElementById("whiteCover");
      const caption = document.getElementById("caption");
      const wrapper = document.querySelector(".row-wrapper");

      // 1マスぶんの「押し出し量」（□の幅 + 余白）をざっくり指定
      // 実際の見え方を見ながらここだけ調整すればOK
      const stepWidth = 80;

      // row を画面の右側の外からスタートさせる
      let currentX = wrapper.offsetWidth;
      row.style.transform = `translateX(${currentX}px)`;

      let index = 0;
      let interval = 450; // 最初の○が付くまでの間隔（ms）

      function step() {
        if (index < cells.length) {
          // 横一列を「左へ」少し送る（紙が送られていくイメージ）
          currentX -= stepWidth;
          row.style.transform = `translateX(${currentX}px)`;

          // 画面の右端側に出てきたセルから順番に○を付ける
          const cell = cells[index];
          cell.classList.add("active");

          index++;

          // だんだんスピードを上げる（下限 80ms）
          interval = Math.max(80, interval * 0.8);
          setTimeout(step, interval);
        } else {
          // 全部に○が付いたら白フェード
          cover.classList.add("show");

          // その後にテキスト
          setTimeout(() => {
            caption.classList.add("show");
          }, 900);
        }
      }

      // ちょっと「溜め」を置いてから開始
      setTimeout(step, 600);
    });
  </script>

  <!-- 本番では不要。デモ用の戻るリンク -->
  <a
    href="character_b.html"
    style="
      position: fixed;
      top: 16px;
      left: 16px;
      font-size: 12px;
      color: #000;
      text-decoration: underline;
      z-index: 1000;
    "
  >
    ← キャラクターBに戻る
  </a>
</body>
</html>
